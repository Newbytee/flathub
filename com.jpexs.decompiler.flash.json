{
	"app-id": "com.jpexs.decompiler.flash",
	"runtime": "org.freedesktop.Platform",
	"runtime-version": "21.08",
	"sdk": "org.freedesktop.Sdk",
	"sdk-extensions": [
		"org.freedesktop.Sdk.Extension.openjdk8"
	],
	"command": "ffdec.sh",
	"finish-args": [
		"--socket=x11",
		"--env=PATH=/app/bin:/app/jre/bin:/usr/bin",
		"--env=JAVA_HOME=/app/jre",
		"--filesystem=home"
	],
	"modules": [
		{
			"name": "openjdk",
			"buildsystem": "simple",
			"build-commands": [
				"/usr/lib/sdk/openjdk8/install.sh"
			]
		},
		{
			"name": "jpexs.decompiler.flash",
			"buildsystem": "simple",
			"build-commands": [
				"ar x ffdec_14.6.0.deb",
				"rm -f ffdec_14.6.0.deb",
				"tar -xf data.tar.gz",
				"rm -f control.tar.gz data.tar.gz debian-binary",
				"rm usr/share/java/ffdec/ffdec.{bat,exe}",
				"install -Dm644 usr/share/applications/FFDec.desktop /app/share/applications/com.jpexs.decompiler.flash.desktop",
				"install -Dm644 usr/share/java/ffdec/icon.png /app/share/icons/hicolor/512x512/apps/com.jpexs.decompiler.flash.png",
				"install -Dm644 com.jpexs.decompiler.flash.metainfo.xml -t /app/share/metainfo",
				"mkdir -p /app/bin",
				"mv usr/share/java/ffdec/* /app/bin",
				"desktop-file-edit --set-key=Exec --set-value=ffdec.sh /app/share/applications/com.jpexs.decompiler.flash.desktop",
				"desktop-file-edit --set-key=Icon --set-value=com.jpexs.decompiler.flash /app/share/applications/com.jpexs.decompiler.flash.desktop",
				"chmod +x /app/bin/ffdec.sh"
			],
			"sources": [
				{
					"type": "file",
					"url": "https://github.com/jindrapetrik/jpexs-decompiler/releases/download/version14.6.0/ffdec_14.6.0.deb",
					"sha256": "ccb8bc95e49b106f64f2503eb30156c13dc24bdec5da2a6ca39d0b5410e876ce"
				},
				{
					"type": "file",
					"path": "com.jpexs.decompiler.flash.metainfo.xml"
				}
			]
		}
	]
}
